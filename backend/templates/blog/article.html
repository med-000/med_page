<style>
/* レイアウト：本文とサイドバー */
.article-layout {
  display: flex;
  gap: 2rem;
  position: relative;
}

/* 本文 */
.main-content {
  flex: 3;
  min-width: 0;
}

/* サイドバー（目次） */
.toc-sidebar {
  flex: 1;
  max-height: 80vh;
  overflow-y: auto;
  position: sticky;
  top: 1rem;
  background-color: #f8f9fa;
  padding: 1rem;
  border: 1px solid #ccc;
  font-size: 0.9rem;
}

/* TOC内のスタイル微調整（必要に応じて） */
.toc-sidebar ul {
  list-style: none;
  padding-left: 0;
}
.toc-sidebar li {
  margin-bottom: 0.5em;
}
.toc-sidebar a {
  text-decoration: none;
  color: #007bff;
}
.toc-sidebar a:hover {
  text-decoration: underline;
}
</style>

{% load app %}
<!-- 記事の本文 -->
<a href="/">
    <p>戻る</p>
</a>    
{% if user.is_authenticated %}
<p><a href="{% url 'article_edit' article.pk%}">記事を編集</a></p>
{% else %}
{% endif %}
<div class="article-layout">
  <!-- 本文 -->
  <div class="main-content">
    {{ article.content|markdown_to_html }}
  </div>

  <!-- サイドバー（目次） -->
  <aside class="toc-sidebar">
    <h4>目次</h4>
    {% extract_toc article.content %}
  </aside>
</div>


{% for comment in comments %}
{{comment.commentater}}<br>
{{ comment.content}}<br>
{{comment.day|date:"Y/n/j "}}<br>
<p>------</p>
{% endfor %}
<form method = "POST">
    {% csrf_token %}
    <label for="comment">ニックネーム:</label><br>
  <input type="text" id="author" name="author" placeholder="あなたの名前を入力" required ><br>
    <label for="comment">コメント:</label><br>
  <textarea id="comment" name="comment" rows="4" cols="50" placeholder="コメントを入力してください..."required></textarea><br>
  <button type="submit">送信</button>
</form>
{% for article in articles|slice:":5"%}
    <div class="card">
      <a style = "text-decoration: none; color : black; " href = "/blog/article/{{article.id}}">
        <h2>{{article.title}}</h2>
        {% for tag in article.tag.all%}
        <span>{{tag.name}}</span>
        {% endfor %}
        <p>{{article.summary|truncatewords:20}}</p>
        <p>{{article.created_day|date:"Y/n/j "}}</p>
      </a>
    </div>
    {% endfor %}
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

